<tmf-layout-1-wapper>
  <div class="flex justify-center items-center min-h-screen">
    <!-- Main Form Container -->
    <div
      class="relative z-10 w-full max-w-4xl bg-white rounded-3xl shadow-2xl p-8 lg:p-12 mx-6"
    >
      <!-- Header -->
      <div class="flex items-center justify-between mb-8">
        <button
          (click)="goBack()"
          class="cursor-pointer flex items-center text-grey-66 hover:text-grey-33 transition-colors"
        >
          <mat-icon class="!w-6 !h-6">
            {{ TmfIcon.KeyboardArrowLeft }}
          </mat-icon>
        </button>

        <h1 class="text-4xl-bold text-primary">教師申請</h1>

        <div class="w-6"></div>
        <!-- Spacer for centering -->
      </div>

      <!-- Stepper -->
      <div class="mb-10">
        <tmf-stepper
          [steps]="steps"
          [currentStep]="currentStep()"
          [showOnlyCurrentLabel]="false"
          (stepChange)="onStepChange($event)"
        ></tmf-stepper>
      </div>

      <!-- Step 1: 基本資料 -->
      @if (currentStep() === 1) {
        <form
          [formGroup]="basicInfoForm"
          (ngSubmit)="onSubmitBasicInfo()"
          class="space-y-6"
        >
          <!-- 縣市地區欄位 -->
          <div class="flex flex-col md:flex-row gap-4">
            <div class="space-y-2">
              <label class="block text-base font-medium text-grey-33"
                >縣市</label
              >
              <tmf-input-select
                [placeholder]="'請選擇縣市'"
                [options]="cityOptions"
                formControlName="city"
              ></tmf-input-select>
              @if (
                basicInfoForm.get("city")?.invalid &&
                basicInfoForm.get("city")?.touched
              ) {
                <div class="text-red-500 text-sm">請選擇縣市</div>
              }
            </div>

            <div class="space-y-2">
              <label class="block text-base font-medium text-grey-33"
                >地區</label
              >
              <tmf-input-select
                [placeholder]="'請選擇地區'"
                [options]="districtOptions()"
                formControlName="district"
              ></tmf-input-select>
            </div>
          </div>

          <div class="space-y-2">
            <label class="block text-base font-medium text-grey-33"
              >詳細地址</label
            >
            <tmf-input-text
              placeholder="請輸入詳細地址"
              formControlName="address"
            ></tmf-input-text>
          </div>

          <div class="flex items-center">
            <div class="space-y-2">
              <label class="block text-base font-medium text-grey-33"
                >教授科目（主分類）</label
              >
              <tmf-input-select
                class="w-full"
                [placeholder]="'請選擇教授科目'"
                [options]="subjectOptions"
                formControlName="subject"
              ></tmf-input-select>
            </div>

            <!-- 教學專長（多選） -->
            <div class="space-y-2">
              <label class="block text-base font-medium text-grey-33"
                >教學專長（次分類）</label
              >
              <tmf-input-multi-select
                [placeholder]="'請選擇教學專長'"
                [options]="specialtyOptions()"
                formControlName="specialties"
              ></tmf-input-multi-select>
            </div>
          </div>

          <div class="space-y-2">
            <label class="block text-base font-medium text-grey-33"
              >自我介紹</label
            >
            <textarea
              class="w-full px-3 py-2 border border-grey-d4 rounded-xl resize-vertical min-h-32 focus:outline-none focus:border-primary transition-colors"
              placeholder="請簡述您的教學經驗、專長及教學理念..."
              formControlName="introduction"
              rows="6"
            ></textarea>
          </div>

          <!-- 提交按鈕 -->
          <div class="pt-6">
            <tmf-button
              type="submit"
              class="w-full h-12"
              [disabled]="basicInfoForm.invalid"
            >
              下一步：工作經驗
            </tmf-button>
          </div>
        </form>
      }

      <!-- 其他步驟的佔位符 -->
      @if (currentStep() === 2) {
        <div class="text-center py-12 text-grey-66">
          <h2 class="text-xl font-medium mb-4">工作經驗</h2>
          <p>此步驟尚未實作</p>
        </div>
      }

      @if (currentStep() === 3) {
        <div class="text-center py-12 text-grey-66">
          <h2 class="text-xl font-medium mb-4">學歷背景</h2>
          <p>此步驟尚未實作</p>
        </div>
      }

      @if (currentStep() === 4) {
        <div class="text-center py-12 text-grey-66">
          <h2 class="text-xl font-medium mb-4">教學證照</h2>
          <p>此步驟尚未實作</p>
        </div>
      }
    </div>
  </div>
</tmf-layout-1-wapper>
