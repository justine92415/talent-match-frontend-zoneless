<div class="container mx-auto px-4 py-6">
  <!-- 頁面標題 -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-grey-33 mb-2">課程預約時段管理</h1>
    <p class="text-grey-66">設定您每週的可預約時段，學生將可以在這些時段預約課程</p>
  </div>

  <!-- 操作按鈕區 -->
  <div class="mb-6 flex flex-wrap gap-3">
    <tmf-button
      variant="primary"
      class="h-10"
      [disabled]="isSaving()"
      (click)="saveSchedule()">
      @if (isSaving()) {
        儲存中...
      } @else {
        儲存排程
      }
    </tmf-button>

    <tmf-button
      variant="secondary"
      class="h-10"
      (click)="resetToDefault()">
      重置為預設
    </tmf-button>

    <tmf-button
      variant="secondary"
      class="h-10"
      (click)="clearAllSchedule()">
      清空所有
    </tmf-button>
  </div>

  <!-- 成功訊息 -->
  @if (saveSuccess()) {
    <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
      <div class="flex items-center">
        <mat-icon class="text-green-500 mr-2">check_circle</mat-icon>
        <p class="text-green-800 font-medium">排程儲存成功！</p>
      </div>
    </div>
  }

  <!-- 可編輯週曆元件 -->
  <div class="bg-white rounded-xl shadow-sm border border-grey-d4 p-6">
    <tmf-editable-weekly-calendar
      [initialData]="scheduleData()"
      (scheduleChange)="onScheduleChange($event)">
    </tmf-editable-weekly-calendar>
  </div>

  <!-- 當前排程資料預覽 -->
  <div class="mt-8 bg-grey-f7 rounded-xl p-6">
    <h2 class="text-xl font-semibold text-grey-33 mb-4">當前排程資料</h2>
    <div class="bg-white rounded-lg p-4 overflow-x-auto">
      <pre class="text-sm text-grey-66">{{ scheduleData() | json }}</pre>
    </div>

    <div class="mt-4 text-sm text-grey-66">
      <p><strong>API請求格式預覽：</strong></p>
      <div class="bg-white rounded-lg p-4 mt-2 overflow-x-auto">
        <pre class="text-sm">{{
          {
            operation: "replace",
            schedule_data: scheduleData()
          } | json
        }}</pre>
      </div>
    </div>
  </div>
</div>
